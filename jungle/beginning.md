# üñç –¢–µ—Ä–º–∏–Ω–∞–ª: –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

{% hint style="info" %}
–°–µ–π—á–∞—Å —Ä–∞–∑–¥–µ–ª –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –û–° Windows.
{% endhint %}

### Windows

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±–æ–ª–æ—á–∫—É [Cmder](../wastelands/getting-started.md#cmder-installation)
* –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞](../wastelands/creating-a-repo.md)
* –û–±–∑–∞–≤–µ—Å—Ç–∏—Å—å [IDE](../wastelands/getting-started.md#setting-up-ide), —Ç.–µ. —Å—Ä–µ–¥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ö–æ–¥ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ü–û, –ø–æ—Ç—Ä–µ–±–Ω–æ–≥–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞, –±—É–¥–µ—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ **terminal**.

#### –í–µ–±-—Å–µ—Ä–≤–µ—Ä

–í –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ä–≤–µ—Ä–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–µ—Ç–∞-–≤–µ—Ä—Å–∏—è [nginx –¥–ª—è Windows](https://nginx.org/ru/docs/windows.html). –î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —É–∂–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ, —è –≤–∫–ª—é—á–∏–ª –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é \(—Ä–∞—Å–ø–∞–∫–æ–≤–∞–≤ –∞—Ä—Ö–∏–≤ [–æ—Ç—Å—é–¥–∞](https://nginx.org/ru/download.html)\) –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: —Å–±–æ—Ä–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ **nginx-win**. 

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **nginx**, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ —Ä–∞–±–æ—Ç—É –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –ë—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∑–∞–¥–∞—á–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ - –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã, –∫–æ–≥–¥–∞ –∏—Ö –±—É–¥–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä.

–í –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é **nginx-win/conf** –ø–æ–º–µ—â–∞–µ–º —Ñ–∞–π–ª **mime.types**, –≤–∑—è—Ç—ã–π –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞, –∏ —Ñ–∞–π–ª **nginx.conf**, –≥–¥–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ \(–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\). –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

{% code title="terminal/nginx-win/conf/nginx.conf" %}
```coffeescript
master_process off;
daemon off;
error_log stderr;

events {
    worker_connections 1024;
}

http {
    include mime.types;
    default_type application/octet-stream;
    sendfile on;
    keepalive_timeout 65;

    server {
        listen 8080;
        server_name localhost;

        location / {
            add_header 'Content-Type' 'text/plain';
            return 200 'OK';
        }
    }
}
```
{% endcode %}

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã nginx –∑–∞–ø—É—Å—Ç–∏–ª—Å—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ª–∏—á–∏–µ –¥–≤—É—Ö –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π **temp** –∏ **logs** –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –∏—Å–ø–æ–ª–Ω–∏–º—ã–º —Ñ–∞–π–ª–æ–º **nginx.exe**. –ú–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç—Ç–∏ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ WebStorm —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –æ–±–æ–ª–æ—á–∫–∏. –ù–∞—Å—Ç—Ä–æ–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

![&#x41D;&#x430;&#x436;&#x438;&#x43C;&#x430;&#x435;&#x43C; Add Configuration...](../.gitbook/assets/image%20%28189%29.png)

![&#x421;&#x43E;&#x437;&#x434;&#x430;&#x43D;&#x438;&#x435; &#x43A;&#x43E;&#x43D;&#x444;&#x438;&#x433;&#x443;&#x440;&#x430;&#x446;&#x438;&#x438; &#x434;&#x43B;&#x44F; &#x437;&#x430;&#x43F;&#x443;&#x441;&#x43A;&#x430; nginx &#x447;&#x435;&#x440;&#x435;&#x437; Batch](../.gitbook/assets/image%20%28222%29.png)

–î–ª—è –Ω–∞—á–∞–ª–∞ —É–∫–∞–∂–µ–º –ø—É—Ç—å –∫ EXE –∏ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

![](../.gitbook/assets/image%20%28230%29.png)

–í —Ä–∞–∑–¥–µ–ª–µ **Before launch** –≤—ã–ø–æ–ª–Ω–∏–º –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π **logs** –∏ **temp**:

![&#x412;&#x44B;&#x431;&#x438;&#x440;&#x430;&#x435;&#x43C; Run External tool &#x438; &#x43D;&#x430;&#x436;&#x438;&#x43C;&#x430;&#x435;&#x43C; &#x43D;&#x430; +](../.gitbook/assets/image%20%28233%29.png)

![](../.gitbook/assets/image%20%28224%29.png)

–ò–º—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `mkdir temp&logs`

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ - `powershell.exe`

–ê—Ä–≥—É–º–µ–Ω—Ç—ã:

```bash
If(!(Test-Path logs)){New-Item -ItemType Directory -Force -Path logs};If(!(Test-Path temp)){New-Item -ItemType Directory -Force -Path temp}
```

–†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `$FileParentDir$`

–§–ª–∞–≥ **Open console for tool output** –º–æ–∂–Ω–æ —Å–Ω—è—Ç—å.

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

![nginx &#x437;&#x430;&#x43F;&#x443;&#x449;&#x435;&#x43D;, &#x432;&#x441;&#x451; &#x432; &#x43F;&#x43E;&#x440;&#x44F;&#x434;&#x43A;&#x435;](../.gitbook/assets/image%20%28232%29.png)

–ï—Å–ª–∏ –≤—Å–µ —Å–¥–µ–ª–∞–Ω–æ –≤–µ—Ä–Ω–æ, —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–º **OK**:

![](../.gitbook/assets/image%20%28226%29.png)

#### –î–µ–ª–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º

–†—è–¥ —Ñ—É–Ω–∫—Ü–∏–π –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∑–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º. –ò —Ö–æ—Ç—è –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ localhost –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ, –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS.

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ HTTPS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø–æ–¥–∫–ª—é—á–∏–º –≤ nginx. –ë—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [mkcert](https://github.com/FiloSottile/mkcert) - —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ-–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Ü–µ–Ω—Ç—Ä–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**. –û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –≤—Å–µ–º–∏ –û–° –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ —Å–±–æ—Ä–∫–∞–º–∏:

{% embed url="https://github.com/FiloSottile/mkcert/releases" %}

–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Ä—Å–∏—é –¥–ª—è `windows-amd64`.

#### –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ **mkcert** —Ä–µ–ø–æ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –¥–æ–ª–∂–Ω–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è **CAROOT**:

```bash
$ .\mkcert-v1.4.3-windows-amd64.exe -CAROOT
```

–û–±—ã—á–Ω–æ —ç—Ç–æ –¥–æ–º–∞—à–Ω—è—è –ø–∞–ø–∫–∞ –≤–∏–¥–∞ `C:\Users\pantini\WebstormProjects\jpx\mkcert`. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º \(–≤–∞—à –ø—É—Ç—å –∫ —Ä–µ–ø–æ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è\):

```bash
$ setx CAROOT "C:\Users\pantini\WebstormProjects\jpx\mkcert"
```

–î–∞–ª–µ–µ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
$ .\mkcert-v1.4.3-windows-amd64.exe -install
```

#### –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ

–í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ [cmder](../wastelands/getting-started.md#cmder-installation):

```bash
$ .\mkcert-v1.4.3-windows-amd64.exe -install
```

–ü–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ [CA](https://ru.wikipedia.org/wiki/%D0%A6%D0%B5%D0%BD%D1%82%D1%80_%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8), –≤—ã–±–∏—Ä–∞–µ–º **–î–∞**. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å –∫–ª—é—á–∞–º–∏ –¥–ª—è localhost –∏ 127.0.0.1:

```bash
$ .\mkcert-v1.4.3-windows-amd64.exe localhost 127.0.0.1
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

![](../.gitbook/assets/image%20%28229%29.png)

–¢–µ–ø–µ—Ä—å —Å–∫–æ–ø–∏—Ä—É–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å –∫–ª—é—á–æ–º –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é **nginx-win/certs**, –∞ —Ç–∞–∫–∂–µ –¥–æ–ø–æ–ª–Ω–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx, –∑–∞–æ–¥–Ω–æ –ø–æ–¥–∫–ª—é—á–∏–≤ [HTTP/2](https://ru.wikipedia.org/wiki/HTTP/2).

{% code title="terminal/nginx-win/conf/nginx.conf" %}
```coffeescript
master_process off;
daemon off;
error_log stderr;

events {
    worker_connections 1024;
}

http {
    include mime.types;
    default_type application/octet-stream;
    sendfile on;
    keepalive_timeout 65;

    server {
        listen 8080 ssl http2;
        server_name localhost;

        ssl_certificate ../certs/localhost+1.pem;
        ssl_certificate_key ../certs/localhost+1-key.pem;

        ssl_protocols TLSv1.3;
        ssl_session_timeout 1d;
        ssl_prefer_server_ciphers off;
        ssl_session_tickets off;

        add_header Strict-Transport-Security "max-age=63072000" always;

        location / {
            add_header 'Content-Type' 'text/plain';
            return 200 'OK';
        }
    }
}

```
{% endcode %}

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º nginx —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é WebStorm, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:

![&#x41F;&#x43E;&#x44F;&#x432;&#x438;&#x43B;&#x441;&#x44F; &quot;&#x437;&#x430;&#x43C;&#x43E;&#x447;&#x435;&#x43A;&quot; &#x432; &#x430;&#x434;&#x440;&#x435;&#x441;&#x43D;&#x43E;&#x439; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x435; - &#x432;&#x441;&#x451; &#x43A;&#x43E;&#x440;&#x440;&#x435;&#x43A;&#x442;&#x43D;&#x43E; &#x440;&#x430;&#x431;&#x43E;&#x442;&#x430;&#x435;&#x442;](../.gitbook/assets/image%20%28223%29.png)

#### –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –≤ –≤–∏–¥–µ [–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](https://web.dev/progressive-web-apps/)

–ß—Ç–æ–±—ã —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–∞–π—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ \(—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É—Å—Ç–∞–Ω–æ–≤–∫–∏\), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å [—Ä—è–¥ —É—Å–ª–æ–≤–∏–π](https://web.dev/install-criteria/#criteria). 

–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª —Å –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–µ—Ä–µ—á–∏—Å–ª–∏–º —Ç–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –∑–Ω–∞—á–∫–∏, —Ü–≤–µ—Ç–∞ –∏ —Ç.–¥. –í—Å—è —Ñ–∞–π–ª–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å–µ–π—á–∞—Å –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ **terminal** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

{% code title="manifest.json" %}
```javascript
{
  "name":        "Pantini Terminal",
  "short_name":  "Pantini Terminal",
  "icons":       [
    {
      "src":   "/icons/terminal/icon-512x512.png",
      "type":  "image/png",
      "sizes": "512x512"
    },
    {
      "src":   "/icons/terminal/icon-192x192.png",
      "type":  "image/png",
      "sizes": "192x192"
    }
  ],
  "lang":        "ru-RU",
  "start_url":   "/",
  "display":     "standalone",
  "theme_color": "#2196f3"
}
```
{% endcode %}

Chrome —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ –∫–∞–∫ –º–∏–Ω–∏–º—É–º –±—ã–ª–∏ –∑–Ω–∞—á–∫–∏-–∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ 512x512 –∏ 192x192.

{% hint style="info" %}
–ö–∞—Ä—Ç–∏–Ω–∫–∏ –±—ã–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ —Ñ–∞–π–ª–∞ `icons/favicon.svg` —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è [IncScape](https://inkscape.org/ru/)
{% endhint %}

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª —Å–∫—Ä–∏–ø—Ç–∞ [Service Worker](https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞ –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–æ–º –∏ nginx. –°–∫—Ä–∏–ø—Ç `terminal-sw.js` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–¥–∞—á–∏ —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –¥–∞–∂–µ –ø—Ä–∏ [–ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º](https://web.dev/offline-fallback-page/). –≠—Ç–æ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –µ—Å—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ.

{% code title="terminal-sw.js" %}
```javascript
// Incrementing OFFLINE_VERSION will kick off the install event and force
// previously cached resources to be updated from the network.
// This variable is intentionally declared and unused.
// Add a comment for your linter if you want:
// eslint-disable-next-line no-unused-vars
const OFFLINE_VERSION = 1;

const CACHE_NAME  = 'offline';
const OFFLINE_URL = 'offline.html';

self.addEventListener('install', (event) => {
  event.waitUntil(
    (async () => {
      const cache = await caches.open(CACHE_NAME);
      // Setting {cache: 'reload'} in the new request will ensure that the
      // response isn't fulfilled from the HTTP cache; i.e., it will be from
      // the network.
      await cache.add(new Request(OFFLINE_URL, {cache: 'reload'}));
    })()
  );
  // Force the waiting service worker to become the active service worker.
  self.skipWaiting();
});

self.addEventListener('activate', (event) => {
  event.waitUntil(
    (async () => {
      // Enable navigation preload if it's supported.
      // See https://developers.google.com/web/updates/2017/02/navigation-preload
      if ('navigationPreload' in self.registration) {
        await self.registration.navigationPreload.enable();
      }
    })()
  );

  // Tell the active service worker to take control of the page immediately.
  self.clients.claim();
});

self.addEventListener('fetch', (event) => {
  // We only want to call event.respondWith() if this is a navigation request
  // for an HTML page.
  if (event.request.mode === 'navigate') {
    event.respondWith(
      (async () => {
        try {
          // First, try to use the navigation preload response if it's supported.
          const preloadResponse = await event.preloadResponse;
          if (preloadResponse) {
            return preloadResponse;
          }

          // Always try the network first.
          return await fetch(event.request);
        } catch (error) {
          // catch is only triggered if an exception is thrown, which is likely
          // due to a network error.
          // If fetch() returns a valid HTTP response with a response code in
          // the 4xx or 5xx range, the catch() will NOT be called.
          console.log('Fetch failed; returning offline page instead.', error);

          const cache = await caches.open(CACHE_NAME);
          return await cache.match(OFFLINE_URL);
        }
      })()
    );
  }

  // If our if() condition is false, then this fetch handler won't intercept the
  // request. If there are any other fetch handlers registered, they will get a
  // chance to call event.respondWith(). If no fetch handlers call
  // event.respondWith(), the request will be handled by the browser as if there
  // were no service worker involvement.
});
```
{% endcode %}

–¢–µ–ø–µ—Ä—å –∏–∑–≥–æ—Ç–æ–≤–∏–º –Ω–∞—á–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ `index.html`. –í—ë—Ä—Å—Ç–∫–∏ –ø–æ–∫–∞ –Ω–µ—Ç, —Ç–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –Ω–∞–¥–ø–∏—Å—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

```markup
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pantini Terminal</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Pantini Terminal">
  <meta name="apple-mobile-web-app-title" content="Pantini Terminal">
  <meta name="msapplication-TileColor" content="#2196f3">
  <meta name="theme-color" content="#2196f3">
  <meta name="msapplication-navbutton-color" content="#2196f3">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="msapplication-starturl" content="/">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<body>
<p>Dummy, not ready yet!</p>
</body>
<script>
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('terminal-sw.js');
  });
</script>
</html>
```

–ò–∑–≥–æ—Ç–æ–≤–∏–º –ø—Ä–æ—Å—Ç–µ–π—à—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `offline.html`, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º:

{% code title="offline.html" %}
```markup
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pantini Terminal</title>
  <link rel="icon" href="icons/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
</head>
<body>
<p>Offline :(</p>
</body>
</html>
```
{% endcode %}

–ù–∞–∫–æ–Ω–µ—Ü, —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é **nginx**, —á—Ç–æ–±—ã —Å–∞–π—Ç "–∑–∞—Ä–∞–±–æ—Ç–∞–ª":

{% code title="nginx-win/conf/nginx.conf" %}
```coffeescript
master_process off;
daemon off;
error_log stderr;

events {
    worker_connections 1024;
}

http {
    include mime.types;
    default_type application/octet-stream;
    sendfile on;
    keepalive_timeout 65;

    server {
        listen 8080 ssl http2;
        server_name localhost;

        ssl_certificate ../certs/localhost+1.pem;
        ssl_certificate_key ../certs/localhost+1-key.pem;

        ssl_protocols TLSv1.3;
        ssl_session_timeout 1d;
        ssl_prefer_server_ciphers off;
        ssl_session_tickets off;

        add_header Strict-Transport-Security "max-age=63072000" always;

        root ..;
        index index.html;

        location / { deny all; }

        location =/terminal-sw.js {}
        location =/manifest.json {}
        location /icons/ {}

        location =/ {
            # internal redirect to =/index.html
        }

        location =/index.html {
        }

        location =/offline.html {
        }
    }
}
```
{% endcode %}

–ü—Ä–æ–≤–µ—Ä–∏–º –≤—ã–¥–∞—á—É –∏ –Ω–∞–∂–º—ë–º –Ω–∞ –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è \(–≤ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏\):

![&#x41D;&#x430;&#x436;&#x438;&#x43C;&#x430;&#x435;&#x43C; &#x43D;&#x430; &#x43A;&#x43D;&#x43E;&#x43F;&#x43A;&#x443; &#x441;&#x43B;&#x435;&#x432;&#x430; &#x43E;&#x442; &#x2B50;&#xFE0F; ](../.gitbook/assets/image%20%28228%29.png)

![&#x412;&#x44B;&#x431;&#x438;&#x440;&#x430;&#x435;&#x43C; &#x423;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x438;&#x442;&#x44C;](../.gitbook/assets/image%20%28225%29.png)

–†–µ–∑—É–ª—å—Ç–∞—Ç:

![&#x41F;&#x440;&#x438;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x435; &#x440;&#x430;&#x431;&#x43E;&#x442;&#x430;&#x435;&#x442;](../.gitbook/assets/image%20%28221%29.png)

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥—ë–º –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ \(F12\), –≤–∫–ª–∞–¥–∫–∞ **Network**. –í —Ä–∞–∑–¥–µ–ª–µ **Throttling** \(—Å–ø—Ä–∞–≤–∞ –æ—Ç —Ñ–ª–∞–≥–∞ **Disable cache**\) –≤—ã–±–µ—Ä–µ–º –≤–∞—Ä–∏–∞–Ω—Ç **Offline**.

![](../.gitbook/assets/image%20%28231%29.png)

–í —Ç–∞–∫–æ–º —Ä–µ–∂–∏–º–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è \(F5\) –≤—ã–¥–∞—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É `offline.html`

